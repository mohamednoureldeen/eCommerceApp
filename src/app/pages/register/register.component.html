<!-- src/app/pages/register/register.component.html -->
<section class="w-full max-w-lg mx-auto p-4 bg-gray-50 dark:bg-gray-800 rounded border shadow">
  <h1 class="text-center text-3xl text-green-600 dark:text-green-400">{{'register.Register'|translate}}</h1>
<!-- form -->
  <form [formGroup]="registerForm" (ngSubmit)="submitForm()" >
<!-- name -->
    <div class="mb-4">
      <label
        for="name"
        class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
        >{{'register.Name'|translate}}</label
      >
      <input
        formControlName="name"
        type="text"
        id="name"
        class="w-full p-2.5 text-sm rounded-lg border bg-white text-gray-900 border-gray-300 
               focus:ring-blue-500 focus:border-blue-500 
               dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
               dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
      />
      <!-- name error -->
      @let nameControl = registerForm.get('name');
      @if (nameControl?.errors && nameControl?.touched) {
        <div class="flex p-3 mt-2 text-sm text-red-800 rounded-lg bg-red-50 
        dark:bg-gray-900 dark:text-red-400" role="alert">
          <svg class="shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
            <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
          </svg>
          <span class="sr-only">Danger</span>
          <div>
              <ul class="list-disc list-inside">
                @if (nameControl?.hasError('required')) {
                  <li>{{'messages.This_field_is_required'|translate}}</li>
                }
                @else if (nameControl?.hasError('minlength')) {
                  <li>{{'messages.Must_be_at_least_3_characters_long'|translate}}</li>
                }
                @else if (nameControl?.hasError('maxlength')) {
                  <li>{{'messages.Must_be_at_most_20_characters_long'|translate}}</li>
                }
              </ul>
          </div>
        </div>
      }
    </div>
<!-- email -->
    <div class="mb-4">
        <label
          for="email"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
          >{{'register.Email'|translate}}</label
        >
        <input
          formControlName="email"
          type="email"
          id="email"
          class="w-full p-2.5 text-sm rounded-lg border bg-white text-gray-900 border-gray-300 
          focus:ring-blue-500 focus:border-blue-500 
          dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
          dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        />
        <!-- email error -->
        @let emailControl = registerForm.get('email');
        @if (emailControl?.errors && emailControl?.touched) {
          <div class="flex p-3 mt-2 text-sm text-red-800 rounded-lg bg-red-50 
          dark:bg-gray-900 dark:text-red-400"  role="alert">
            <svg class="shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Danger</span>
            <div>
                <ul class="list-disc list-inside">
                  @if (emailControl?.hasError('required')) {
                    <li>{{'messages.This_field_is_required'|translate}}</li>
                  }
                  @else if (emailControl?.hasError('email')) {
                    <li>{{'messages.Must_be_a_valid_email_address'|translate}}</li>
                  }
              </ul>
            </div>
          </div>
        }
    </div>
<!-- password -->
    <div class="mb-4">
        <label
          for="password"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
          >{{'register.Password'|translate}}</label
        >
        <input
          formControlName="password"
          type="password"
          id="password"
          class="w-full p-2.5 text-sm rounded-lg border bg-white text-gray-900 border-gray-300 
          focus:ring-blue-500 focus:border-blue-500 
          dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
          dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        />
        <!-- password error -->
        @let passwordControl = registerForm.get('password');
        @if (passwordControl?.errors && passwordControl?.touched) {
          <div class="flex p-3 mt-2 text-sm text-red-800 rounded-lg bg-red-50 
          dark:bg-gray-900 dark:text-red-400" role="alert">
            <svg class="shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Danger</span>
            <div>
                <ul class="list-disc list-inside">
                  @if (passwordControl?.hasError('required')) {
                    <li>{{'messages.This_field_is_required'|translate}}</li>
                  }
                  @else if (passwordControl?.hasError('pattern')) {
                    <li>{{'messages.Must_be_at_least_8_characters_long_and_contain_at_least_one_uppercase_letter_one_lowercase_letter_and_one_number'|translate}}</li>
                  }
              </ul>
            </div>
          </div>
        }
    </div>
<!-- confirm password -->
    <div class="mb-4">
        <label
          for="rePassword"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
          >{{'register.Confirm_Password'|translate}}</label
        >
        <input
          formControlName="rePassword"
          type="password"
          id="rePassword"
          class="w-full p-2.5 text-sm rounded-lg border bg-white text-gray-900 border-gray-300 
          focus:ring-blue-500 focus:border-blue-500 
          dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
          dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        />
        <!-- confirm password error -->
        @if (registerForm.getError('mismatch') && registerForm.get('rePassword')?.touched) {
          <div class="flex p-3 mt-2 text-sm text-red-800 rounded-lg bg-red-50 
          dark:bg-gray-900 dark:text-red-400" role="alert">
            <svg class="shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Danger</span>
            <div>
                <ul class="list-disc list-inside">
                  <li>{{'messages.Passwords_must_match'|translate}}</li>
              </ul>
            </div>
          </div>
        }
    </div>
<!-- phone -->
    <div class="mb-1">
        <label
          for="phone"
          class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300"
          >{{'register.Phone_Number'|translate}}</label
        >
        <input
          formControlName="phone"
          type="tel"
          id="phone"
          class="w-full p-2.5 text-sm rounded-lg border bg-white text-gray-900 border-gray-300 
               focus:ring-blue-500 focus:border-blue-500 
               dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 
               dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
        />
        <!-- phone error -->
        @let phoneControl = registerForm.get('phone');
        @if (phoneControl?.errors && phoneControl?.touched) {
          <div class="flex p-3 mt-2 text-sm text-red-800 rounded-lg bg-red-50 
          dark:bg-gray-900 dark:text-red-400" role="alert">
            <svg class="shrink-0 inline w-4 h-4 me-3 mt-[2px]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
              <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"/>
            </svg>
            <span class="sr-only">Danger</span>
            <div>
                <ul class="list-disc list-inside">
                  @if (phoneControl?.hasError('required')) {
                    <li>{{'messages.This_field_is_required'|translate}}</li>
                  }
                  @else if (phoneControl?.hasError('pattern')) {
                    <li>{{'messages.Must_be_a_valid_Egyptian_phone_number'|translate}}</li>
                  }
              </ul>
            </div>
          </div>
        }
    </div>
<!--  -->

<!-- submit -->
    <button [disabled]="isLoading" type="submit" 
        class="mt-4 w-full btn-main bg-green-600 hover:bg-green-700 text-white py-3 px-4 rounded-lg shadow-md transition">
  {{'register.sign_up'|translate}}
  @if (isLoading) {
    <span class="ml-2"><i class="fas fa-spin fa-spinner"></i></span>
  }
</button>

<!-- Error Message box -->
@if (msgError) {
  <p class="w-full max-w-lg mt-4 px-4 py-3 text-white font-bold text-center rounded-lg 
            bg-red-600 border border-red-700 shadow-md 
            dark:bg-red-500 dark:border-red-600">
    {{msgError}}
  </p>
}
<!-- Success Message box -->
@if (success) {
  <p class="w-full max-w-lg mt-4 px-4 py-3 text-white font-bold text-center rounded-lg 
            bg-green-600 border border-green-700 shadow-md 
            dark:bg-green-500 dark:border-green-600">
    {{success}}
  </p>
}


<p class="mt-3 text-sm text-gray-700 dark:text-gray-300">
 Already have an account?
  <a class="text-green-600 dark:text-green-400 hover:underline font-medium" routerLink="/login">
      {{'forgotpassword.back_to_login'|translate}}
  </a>
</p>   
</form>

</section>

